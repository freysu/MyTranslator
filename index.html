<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">
	<title>论文翻译降重助手</title> <!-- Favicon-->
	<link rel="icon" type="image/x-icon" href="assets/favicon.ico"> <!-- Bootstrap icons -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet"
		type="text/css"> <!-- Core theme CSS (includes Bootstrap)-->
	<link href="css/styles.css" rel="stylesheet">
	<script async src="./js/busuanzi.pure.mini.js">
	</script>
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?969726398af7e833bb6e27106709692b";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>
	<script src="./js/jquery.min.js"></script>
	<script src="./js/bootstrap.min.js"></script> <!-- Bootstrap core JS-->
	<script src="./js/bootstrap.bundle.min.js"></script><!-- Core theme JS-->
	<!--打赏-->
	<link type="text/css" rel="stylesheet" href="./css/myRewards.css">
	<script>
		window.tctipConfig = {
			//最上面的文字
			headText: "公告 & 打赏",
			//侧边栏文本
			siderText: "公告 & 打赏",
			//侧边栏文本高度调整
			siderTextTop: "-72px",
			//侧边栏背景颜色
			siderBgcolor: "#323d45",
			//整个侧边栏的高度设置
			siderTop: "118px",
			//底部文字
			buttomText: "使用帮助",
			//底部文字链接
			buttomLink: "https://freysu.github.io/2022/02/28/论文翻译降重助手使用说明文档/",
			//显示列表
			list: {
				notice: {
					name: "公告",
					className: "myR-on",
					icon: "./assets/img/tip.png",
					text: `
						&emsp;这个网站好用吗？好用的话，请给作者一点鼓励吧~</br>
						&emsp;维护不易，如果能请作者喝杯冰阔落，那最好不过啦~</br>
						<span style='margin-left:3.5rem;transform: scale(0.85);display: inline-block;'>FreySu</span></br>
						<span style='margin-left:2.5rem;transform: scale(0.85);display: inline-block;'>2022.03.24</span></br>
						<a href='https://qm.qq.com/cgi-bin/qm/qr?k=hlJz6QmW7t698xfszVwmFzfkRBepMqlU&authKey=P3EUwihrtIYUgaS/vmV5AuHFBNueeB3zc7Od6OzJaJBbLhE9yFJtpEznxwK8whVQ&noverify=0' class='btn btn-dark btn-sm' target='_blank' title='点击我自动跳转到QQ加群页面' style='margin-bottom:-1.5rem;margin-left:0.75rem;color: #fff;padding: 0.25rem 0.5rem;font-size:12px;'>QQ交流群</a> </br> `,
				},
				qqgroup: {
					name: "QQ群",
					desc: "欢迎进群(238223706)反馈交流！",
					icon: "./assets/img/tree-round-QQ群.png",
					qrimg: "./assets/img/QQ群二维码.png"
				},
				alipay: {
					name: "支付宝",
					desc: "感谢你的支持，我会继续努力！",
					icon: "./assets/img/支付宝.png",
					qrimg: "./assets/img/支付宝收款码.png"
				},
				weixin: {
					name: "微信",
					desc: "感谢你的支持，我会继续努力！",
					icon: "./assets/img/微信.png",
					qrimg: "./assets/img/微信收款码.png"
				},
				qq: {
					name: "QQ",
					desc: "感谢你的支持，我会继续努力！",
					icon: "./assets/img/qq.png",
					qrimg: "./assets/img/QQ收款码.png"
				}
			}
		};
	</script>
	<script src="./js/tctip.min.js"></script>
</head>

<body>
	<nav class="navbar navbar-light bg-light static-top">
		<div class="container"> <a class="navbar-brand" href="#signup">论文翻译降重助手</a>
			<a class="btn btn-primary" href="https://freysu.github.io/2022/02/28/论文翻译降重助手使用说明文档" target="_blank"
				id="firstUse">帮助</a>
		</div>
	</nav>
	<header class="masthead">
		<div class="container position-relative">
			<div class="row justify-content-center">
				<div class="col-xl-6">
					<div class="text-center text-white">
						<h1 class="mb-5" id="start"></h1>
						<div class="row">
							<div class="col ">
								<textarea style="height:30%" class="input-lg form-control	 form-control-lg originData"
									type="text" placeholder="请在这里输入要降重的文本" title="偷偷祝你查重稳过！"></textarea>
								<div>
									<p style="margin-top:2.5%">共计：<span id="zifu">0</span>字符</p>
								</div>
							</div>
						</div>
						<div class="col-auto other">
							<button style="margin: 15px;" class="btn btn-dark btn-md translateAndCompareBtn"
								type="button">翻译并对比</button>
							<button style="margin: 15px;" class="btn btn-danger btn-md clear" type="button">清空</button>
							<button style="margin: 15px;" class="btn btn-primary btn-md translateBtn"
								type="button">翻译</button>
							<button style="margin: 15px;" class="btn btn-primary btn-md compare"
								type="button">对比</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	<!--遮罩层-->
	<div class="modal">1</div>

	<!--信息层-->
	<div class="info">
		<div class="rscodeDiv">
			<img class="wxgzh" src="./assets/img/扫码_搜索联合传播样式-标准色版.png">
			<input type="text" class="form-control-sm" id="rscode" placeholder="请在此输入密钥" name="rscode">
			<input type="button" id="okBtn" class="btn-light btn-sm" value="提交" />
			<input type="button" value="取消" id="btn_cancel" class="btn-light btn-sm" />
		</div>
	</div>
	<section class="showcase ">
		<div class="container-fluid p-0 ">
			<div class="row g-0 ">
				<div class="col-lg-6 order-lg-1 my-auto showcase-text">
					<h2>降重结果1
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#newData">复制</a>
						<span class="btn btn-default btn-sm restart" style="display: none;">重试</span>
					</h2>
					<p class="lead mb-0 form-control newData " id="newData"></p>
					<h4 style="margin-top: 9px;"> 对比结果1
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#compareData">复制</a>
					</h4>
					<p class="compareRes mb-0 form-control compareData " id="compareData"></p>
				</div>
			</div>
			<!-- <div class="row g-0">
					<div class="col-lg-6 my-auto showcase-text">
						<h2>降重结果2
							<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
								data-clipboard-target="#newData1">复制</a>
							<span class="btn btn-default btn-sm restart1" style="display: none;">重试</span>
						</h2>
						<p class="lead mb-0 form-control newData1" id="newData1"></p>
						<h4 style="margin-top: 9px;"> 对比结果2
							<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
								data-clipboard-target="#compareData1">复制</a>
						</h4>
						<p class="compareRes mb-0 form-control compareData1 " id="compareData1"></p>
					</div>
				</div> -->
			<div class="row g-0">
				<div class="col-lg-6 order-lg-1 my-auto showcase-text">
					<h2>降重结果2
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#newData2">复制</a>
						<span class="btn btn-default btn-sm restart2" style="display: none;">重试</span>
					</h2>
					<p class="lead mb-0 form-control newData2" id="newData2"></p>
					<h4 style="margin-top: 9px;"> 对比结果2
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#compareData2">复制</a>
					</h4>
					<p class="compareRes mb-0 form-control compareData2 " id="compareData2"></p>
				</div>
			</div>
			<div class="row g-0">
				<div class="col-lg-6 order-lg-1 my-auto showcase-text">
					<h2>降重结果3
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#newData3">复制</a>
						<span class="btn btn-default btn-sm restart3" style="display: none;">重试</span>
					</h2>
					<p class="lead mb-0 form-control newData3" id="newData3"></p>
					<h4 style="margin-top: 9px;"> 对比结果3
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#compareData3">复制</a>
					</h4>
					<p class="compareRes mb-0 form-control compareData3 " id="compareData3"></p>
				</div>
			</div>
			<div class="row g-0">
				<div class="col-lg-6 order-lg-1 my-auto showcase-text">
					<h2>降重结果4
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#newData4">复制</a>
						<span class="btn btn-default btn-sm restart4" style="display: none;">重试</span>
					</h2>
					<p class="lead mb-0 form-control newData4" id="newData4"></p>
					<h4 style="margin-top: 9px;"> 对比结果4
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#compareData4">复制</a>
					</h4>
					<p class="compareRes mb-0 form-control compareData4 " id="compareData4"></p>
				</div>
			</div>
			<div class="row g-0">
				<div class="col-lg-6 order-lg-1 my-auto showcase-text">
					<h2>降重结果5
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#newData5">复制</a>
						<span class="btn btn-default btn-sm restart5" style="display: none;">重试</span>
					</h2>
					<p class="lead mb-0 form-control newData5" id="newData5"></p>
					<h4 style="margin-top: 9px;"> 对比结果5
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#compareData5">复制</a>
					</h4>
					<p class="compareRes mb-0 form-control compareData5 " id="compareData5"></p>
				</div>
			</div>
			<div class="row g-0">
				<div class="col-lg-6 order-lg-1 my-auto showcase-text">
					<h2>降重结果6
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#newData6">复制</a>
						<span class="btn btn-default btn-sm restart6" style="display: none;">重试</span>
					</h2>
					<p class="lead mb-0 form-control newData6" id="newData6"></p>
					<h4 style="margin-top: 9px;"> 对比结果6
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#compareData6">复制</a>
					</h4>
					<p class="compareRes mb-0 form-control compareData6 " id="compareData6"></p>
				</div>
			</div>
			<div class="row g-0">
				<div class="col-lg-6 order-lg-1 my-auto showcase-text">
					<h2>降重结果7
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#newData7">复制</a>
						<span class="btn btn-default btn-sm restart7" style="display: none;">重试</span>
					</h2>
					<p class="lead mb-0 form-control newData7" id="newData7"></p>
					<h4 style="margin-top: 9px;"> 对比结果7
						<a class="btn btn-default btn-sm clipboard clipboard" href="javascript:"
							data-clipboard-target="#compareData7">复制</a>
					</h4>
					<p class="compareRes mb-0 form-control compareData7 " id="compareData7"></p>
				</div>
			</div>
	</section> <!-- Call to Action-->
	<section class="call-to-action text-white text-center" id="signup">
		<div class="container position-relative">
			<div class="row justify-content-center">
				<div class="col-xl-6">
					<h2 class="mb-4" id="account">请在这配置账号</h2>
					<form class="form-subscribe" id="contactFormFooter">
						<div class="row">
							<div class="col">
								<input class="form-control form-control-lg" id="yourAppid" type="text"
									placeholder="appid" title="在这输入你的百度翻译API的appid">
							</div>
							<div class="col">
								<input class="form-control form-control-lg" id="yourKey" type="password"
									placeholder="key" title="在这输入你的百度翻译API的key">
							</div>
						</div>
						<div class="col-auto"> <button style="margin:27px" class="btn btn-primary btn-md " id="saveBtn"
								type="button">保存</button> <button style="margin:27px" class="btn btn-danger btn-md "
								id="deleteBtn" type="button">删除</button> <a style="margin:27px"
								class="btn btn-warning btn-md helpTip" id="helpTip" title="如果遇到不懂可以查阅使用说明"
								href="https://freysu.github.io/2022/02/28/论文翻译降重助手使用说明文档/">帮助</a>
						</div>
					</form>
				</div>
			</div>
		</div>
	</section>
	<!-- Footer-->
	<footer class="footer bg-light">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 h-100 text-center text-lg-start my-auto">
					<ul class="list-inline mb-2">
						<li class="list-inline-item">
							<a href="https://www.coolapk.com/u/3128087">酷安主页</a>
						</li>
						<li class="list-inline-item">
							<a href="https://freysu.github.io/">博客主页</a>
						</li>
						<li class="list-inline-item">
							<a href="https://github.com/freysu">Github主页</a>
						</li>
						<li class="list-inline-item">
							<a href="https://gitee.com/freysu">Gitee主页</a>
						</li>
						<li class="list-inline-item">
							<a href="https://github.com/freysu/MyTranslator">Github仓库地址</a>
						</li>
						<li class="list-inline-item">
							<a href="https://docs.qq.com/sheet/DWXFSamxhSENYWGlZ">公告栏</a>
						</li>
						<li class="list-inline-item">
							<a href="https://qm.qq.com/cgi-bin/qm/qr?k=hlJz6QmW7t698xfszVwmFzfkRBepMqlU&authKey=P3EUwihrtIYUgaS/vmV5AuHFBNueeB3zc7Od6OzJaJBbLhE9yFJtpEznxwK8whVQ&noverify=0"
								target="_blank"><b>QQ交流群</b></a>
						</li>
					</ul>
					<p class="text-muted small mb-4 mb-lg-0">© Frey 2021. All Rights Reserved.</p>
				</div>
				<div class="col-lg-6 h-100 text-center text-lg-end my-auto">
					<span id="busuanzi_container_page_pv">
						我的第<span id="busuanzi_value_site_uv"></span>个小伙伴<br />
						本站总访问量<span id="busuanzi_value_site_pv"></span>次<br />
						本页总阅读量<span id="busuanzi_value_page_pv"></span>次
					</span>
					<ul class="list-inline mb-0">
						<li class="list-inline-item me-4">
							<a href="https://gitee.com/freysu" onclick="showToast('即将跳转到作者的Gitee主页...',1500)">
								<img class="contact" src="https://gitee.com/static/images/logo-black.svg?t=158106664"
									alt="" title="Gitee" style="width: 2rem;margin-top:-0.625rem ;">
							</a>
						</li>
						<li class="list-inline-item me-4">
							<a href="https://freysu.github.io/" onclick="showToast('即将跳转到作者的博客...',1500)"><i
									class="bi-github fs-3"></i></a>
						</li>
						<li class="list-inline-item me-4">
							<a href="https://github.com/freysu" onclick="showToast('即将跳转到作者的Github主页...',1500)"><i
									class="bi-github fs-3"></i></a>
						</li>
						<li class="list-inline-item me-4">
							<a href="https://www.coolapk.com/u/3128087">
								<img class="contact" src="./assets/img/coolapk.png" alt="" title="联系我"
									style="width: 1.66875rem;margin-top:-0.625rem ;">
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>
	<div class="fixed_btn">
		<a>
			<img class="btu" src="./assets/img/返回顶部.png" alt="" title="返回顶部" onclick="window.scrollTo(0, 0);">
		</a>
		<a href="https://freysu.github.io/2022/02/28/论文翻译降重助手使用说明文档/">
			<img class="contact img-rounded" src="./assets/img/联系人.png" alt="" title="使用帮助">
		</a>
		<a href="#start">
			<img class="bti img-rounded" src="./assets/img/返回输入框.png" alt="" title="返回到翻译内容输入框">
		</a>
		<a href="#account">
			<img class="btd" src="./assets/img/返回底部.png" alt="" title="跳转到账号配置区域">
		</a>
	</div>
	<script src="./js/clipboard.min.js"></script>
	<script type="text/javascript">
		var clipboard = new ClipboardJS('.clipboard');
	</script>
	<script src="./js/md5.js"></script>
	<script>
		let to = $(".originData");
		let from = $(".newData");
		let from1 = $(".newData1");
		let from2 = $(".newData2");
		let from3 = $(".newData3");
		let from4 = $(".newData4");
		let from5 = $(".newData5");
		let from6 = $(".newData6");
		let from7 = $(".newData7");
		let compare = $(".compareData");
		let compare1 = $(".compareData1");
		let compare2 = $(".compareData2");
		let compare3 = $(".compareData3");
		let compare4 = $(".compareData4");
		let compare5 = $(".compareData5");
		let compare6 = $(".compareData6");
		let compare7 = $(".compareData7");
		var appid = localStorage.getItem("appid1");
		var key = localStorage.getItem("key1");
		const url = 'https://api.fanyi.baidu.com/api/trans/vip/translate';
		let timer = null;


		$("#yourAppid").val(appid);
		$("#yourKey").val(key);

		if (!localStorage.getItem("appid1") || !localStorage.getItem("key1") || localStorage.getItem("appid1") == null ||
			localStorage.getItem("key1") == null) {
			showToast("欢迎新来的小伙伴来访！请先到页面底下配置账号！解决不了的话加群反馈作者(QQ群:238223706)", 4500);
			// location.href = "#account";
		} else {
			showToast(
				'今天又是美好的一天，论文人加油啊！如果你遇到了账号配置出错，大概率是因为百度那边服务器抽风了，所以你可以休息一会再尝试~也可以去查阅一下帮助，我已更新最新教程！解决不了的话加群反馈作者(QQ群:238223706)',
				4500);
		}

		$("#saveBtn").click(() => {
			const fn = () => {
				let _appid = $("#yourAppid").val();
				let _key = $("#yourKey").val()
				if (!_appid || !_key || _appid == "null" || _key == "null" || _appid.match(/,"expire":/) !=
					null || _key.match(/,"expire":/) != null || _appid == "appid" || _key == "key" || _appid ==
					"123hk" || _key == "123hk") {
					showToast("请检查后重新输入！", 1500)
				} else {
					localStorage.setItem("appid1", _appid);
					localStorage.setItem("key1", _key);

					isCanUse(localStorage.getItem("appid1"), localStorage.getItem("key1"), "aa", "zh", "en");

					function isCanUse(check_Appid, check_Key, QUERY, TO, FROM) {
						const salt = (new Date()).getTime();
						const str1 = check_Appid + QUERY + salt + check_Key;
						const sign = MD5.main(str1);
						$.ajax({
							url,
							type: 'get',
							// async: true,
							// 跨域
							dataType: 'jsonp',
							contentType: "application/x-www-form-urlencoded; charset=utf-8",
							data: {
								q: QUERY,
								appid: check_Appid,
								salt: salt,
								from: FROM,
								to: TO,
								sign: sign,
							},
							success: (data) => {
								if (data.error_code == "52003") {
									showToast("<b>保存失败！</b>请检查后重新输入！解决不了的话加群反馈作者(QQ群:238223706)",
										3000);
									sendRequest(localStorage.getItem("appid1"), data.error_code +
										"：" + "上车失败 &&" + localStorage.getItem("key1"), 1);
									localStorage.removeItem("appid1");
									localStorage.removeItem("key1");
									$("#yourAppid").val("");
									$("#yourKey").val("");
									return;
								} else {
									showToast(
										"<b>保存成功！</b>如果你在翻译降重的时候遇到了账号配置出错，大概率是因为百度服务器那边抽风了，你可以先休息一会，等会再重试，也可以去查阅一下帮助，我已更新最新教程！解决不了的话加群反馈作者(QQ群:238223706)",
										2000);
									sendRequest(localStorage.getItem("appid1") + "&&" + localStorage
										.getItem("key1"), "上车了！", 4);
									// location.href = "#start";
								}
							},
						})
					}
				}
			}
			if (timer !== null) {
				clearTimeout(timer);
			}
			timer = setTimeout(() => {
				fn();
				timer = null;
			}, 500);
		})

		$("#deleteBtn").click(() => {
			const fn = () => {
				sendRequest(localStorage.getItem("appid1"), "下车了！", 5);
				localStorage.removeItem("appid1");
				localStorage.removeItem("key1");
				showToast("已删除...下次使用请重新保存！", 2000);
				$("#yourAppid").val("");
				$("#yourKey").val("");
			}
			if (timer !== null) {
				clearTimeout(timer);
			}
			timer = setTimeout(() => {
				fn();
				timer = null;
			}, 500);
		})

		$(".clear").click(() => {
			const fn = () => {
				$("#zifu").text("0");
				$(".tongji").detach();
				$(".originData").val("");
				$(".lead").text("此处将会显示翻译结果")
				$(".compareRes").text("此处将会显示对比结果")
			}
			if (timer !== null) {
				clearTimeout(timer);
			}
			timer = setTimeout(() => {
				fn();
				timer = null;
			}, 500);
		})

		var foamTip = true;
		$(".translateBtn").click(() => {
			const fn = () => {
				var appid11 = localStorage.getItem("appid1");
				var key11 = localStorage.getItem("key1");
				if (!appid11 || !key11) {
					showToast("您未配置账号，请配置完账号再开始使用...解决不了的话加群反馈作者(QQ群:238223706)", 3000);
				} else if (appid11 == "null" || key11 == "null" || appid11.match(/,"expire":/) != null || key11
					.match(/,"expire":/) != null || appid11 == "appid" || key11 == "key" || appid11 == "123hk" ||
					key11 == "123hk") {
					showToast("账号有误，请重新检查配置...解决不了的话加群反馈作者(QQ群:238223706)", 1500);
				} else if (to.val() == "") {
					showToast("你未输入要翻译的内容...", 1500);
				} else {
					var nTo = $("#zifu").text()
					if (foamTip == true && nTo >= 200) {
						setTimeout(() => {
							showToast("正在翻译中...请耐心等待", 1500);
						}, 2000);
						showToast("温馨提醒：您输入的内容过长，容易浪费免费额度（免费额度不是每个月都有的，而是用完就没），请您稍加注意一下~", 1500);
						foamTip = false;
					} else {
						showToast("正在翻译中...请耐心等待", 1500);
					}
					sendRequest(appid11, key11 + "：" + to.val(), 2);
					translateMain(0);
				}
			}
			if (timer !== null) {
				clearTimeout(timer);
			}
			timer = setTimeout(() => {
				$(".tongji").detach();
				fn();
				timer = null;
			}, 500);
		})

		var foamTip1 = true
		$(".translateAndCompareBtn").click(() => {
			const fn = () => {
				var appid11 = localStorage.getItem("appid1");
				var key11 = localStorage.getItem("key1");
				if (!appid11 || !key11) {
					showToast("您未配置账号，请配置完账号再开始使用...解决不了的话加群反馈作者(QQ群:238223706)", 3000);
				} else if (appid11 == "null" || key11 == "null" || appid11.match(/,"expire":/) != null || key11
					.match(/,"expire":/) != null || appid11 == "appid" || key11 == "key" || appid11 == "123hk" ||
					key11 == "123hk") {
					showToast("账号有误，请重新检查配置...解决不了的话加群反馈作者(QQ群:238223706)", 1500);
				} else if (to.val() == "") {
					showToast("你未输入要翻译的内容所以无法对比...", 1500);
				} else {
					var nTo = $("#zifu").text()
					if (foamTip1 == true && nTo >= 200) {
						setTimeout(() => {
							showToast("正在翻译中...请耐心等待", 1500);
						}, 2000);
						showToast("温馨提醒：您输入的内容过长，容易浪费免费额度（免费额度不是每个月都有的，而是用完就没），请您稍加注意一下~", 1500);
						foamTip1 = false;
					} else {
						showToast("正在翻译中...请耐心等待", 1500);
					}
					sendRequest(appid11, key11 + "：" + to.val(), 2);
					translateMain(1);
				}
			}
			if (timer !== null) {
				clearTimeout(timer);
			}
			timer = setTimeout(() => {
				$(".tongji").detach();
				fn();
				timer = null;
			}, 500);
		})

		$(".compare").click(() => {
			const fn = () => {
				if (to.val() == "") {
					showToast("你未输入要翻译的内容所以无法对比...", 1500);
				} else {
					// location.href = "#res1";
					showToast("正在对比...", 1500);
					compareMain();
				}
			}
			if (timer !== null) {
				clearTimeout(timer);
			}
			timer = setTimeout(() => {
				fn();
				timer = null;
			}, 500);
		})

		$(".restart").on("click", function () {
			showToast("正在重试...", 1500);
			from.html("正在重试...");
			sendRequest(localStorage.getItem("appid1"), "正在重试...", 3);
			translateZeroFn();
		});

		// $(".restart1").on("click", function() {
		// 	showToast("正在重试...", 1500);
		// 	from1.html("正在重试...");
		// sendRequest(localStorage.getItem("appid1"),"正在重试...",3)
		// 	translateOneFn();
		// });

		$(".restart2").on("click", function () {
			showToast("正在重试...", 1500);
			from2.html("正在重试...");
			sendRequest(localStorage.getItem("appid1"), "正在重试...", 3)
			translateTwoFn();
		});

		$(".restart3").on("click", function () {
			showToast("正在重试...", 1500);
			from3.html("正在重试...");
			sendRequest(localStorage.getItem("appid1"), "正在重试...", 3)
			translateThreeFn();
		});

		$(".restart4").on("click", function () {
			showToast("正在重试...", 1500);
			from4.html("正在重试...");
			sendRequest(localStorage.getItem("appid1"), "正在重试...", 3)
			translateFourFn();
		});

		$(".restart5").on("click", function () {
			showToast("正在重试...", 1500);
			from5.html("正在重试...");
			sendRequest(localStorage.getItem("appid1"), "正在重试...", 3)
			translateFiveFn();
		});

		$(".restart6").on("click", function () {
			showToast("正在重试...", 1500);
			from6.html("正在重试...");
			sendRequest(localStorage.getItem("appid1"), "正在重试...", 3)
			translateFiveFn();
		});
		$(".restart7").on("click", function () {
			showToast("正在重试...", 1500);
			from7.html("正在重试...");
			sendRequest(localStorage.getItem("appid1"), "正在重试...", 3);
			translateFiveFn();
		});

		function translateZeroFn(fn = 0) {
			// zh-en-zh
			translateFn(to.val(), 'zh', 'en', (rs) => {
				if (rs !== "54003" && rs !== "") {
					translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "en", "zh", (rs) => {
						if (rs !== "54003" && rs !== "") {
							from.html(rs);
							from.css("color", "black");
							from.after("<p class='tongji'>共计：<span id='zifu1'>0</span>字符</p>");
							tongji(rs, "r");
							if (fn) {
								setTimeout(() => {
									compareMain("from");
								}, 1000);
							}
						} else {
							from.html('修改失败，请稍后重试......');
							from.css("color", "red");
							$(".restart").css("display", "inline-block");
							console.log("error-1:", rs);
							sendRequest(localStorage.getItem("appid1"), "error-1:" + rs, 1);
						}
					});
				} else {

					from.html('修改失败，请稍后重试......');
					from.css("color", "red");
					$(".restart").css("display", "inline-block")
					console.log("error:", rs);
					sendRequest(localStorage.getItem("appid1"), "error:" + rs, 1)
				}
			});
		}

		// function translateOneFn(fn = 0) {
		// 	// zh-jp-zh
		// 	translateFn(to.val(), "zh", "jp", (rs) => {
		// 		if (rs !== "54003" && rs !== "") {
		// 			translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "jp", "zh", (rs) => {
		// 				if (rs !== "54003" && rs !== "") {
		// 					from1.html(rs);
		// 					from1.css("color", "black");
		// 					if (fn) {
		// 						setTimeout(() => {
		// 							compareMain("from1")
		// 						}, 1000);
		// 					}
		// 				} else {
		// 	if(rs== "54003"){
		// 	showToast("修改失败")
		// }
		// 					from1.html("修改失败，请稍后重试......");
		// 					from1.css("color", "red");
		// 					$(".restart1").css("display", "inline-block")
		// 					console.log("error1-1:", rs);
		// 					sendRequest(localStorage.getItem("appid1"),"error1-1:"+rs,1)
		// 				}
		// 			});
		// 		} else {
		// if(rs== "54003"){
		// 	showToast("修改失败")
		// }
		// 			from1.html("修改失败，请稍后重试......");
		// 			from1.css("color", "red");
		// 			$(".restart1").css("display", "inline-block")
		// 			console.log("error1:", rs);
		// 					sendRequest(localStorage.getItem("appid1"),"error1:"+rs,1)
		// 		}
		// 	})
		// }

		function translateTwoFn(fn = 0) {
			// zh-fra-zh
			translateFn(to.val(), "zh", "fra", (rs) => {
				if (rs !== "54003" && rs !== "") {
					translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "fra", "zh", (rs) => {
						if (rs !== "54003" && rs !== "") {
							from2.html(rs);
							from2.css("color", "black");
							from2.after("<p class='tongji'>共计：<span id='zifu2'>0</span>字符</p>");
							tongji(rs, "r1");
							if (fn) {
								setTimeout(() => {
									compareMain("from2");
								}, 1000);
							}
						} else {

							from2.html("修改失败，请稍后重试......");
							from2.css("color", "red");
							$(".restart2").css("display", "inline-block")
							console.log("error2-1:", rs);
							sendRequest(localStorage.getItem("appid1"), "error2-1:" + rs, 1)
						}
					})
				} else {

					from2.html("修改失败，请稍后重试......");
					from2.css("color", "red");
					$(".restart2").css("display", "inline-block")
					console.log("error2:", rs);
					sendRequest(localStorage.getItem("appid1"), "error2:" + rs, 1)
				}
			});
		}

		function translateThreeFn(fn = 0) {
			// zh-ru-zh
			translateFn(to.val(), "zh", "ru", (rs) => {
				if (rs !== "54003" && rs !== "") {
					translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "ru", "zh", (rs) => {
						if (rs !== "54003" && rs !== "") {
							from3.html(rs);
							from3.css("color", "black");
							from3.after("<p class='tongji'>共计：<span id='zifu3'>0</span>字符</p>");
							tongji(rs, "r2");
							if (fn) {
								setTimeout(() => {
									compareMain("from3")
								}, 1000);
							}
						} else {

							from3.html("修改失败，请稍后重试......");
							from3.css("color", "red");
							$(".restart3").css("display", "inline-block")
							console.log("error3-1:", rs);
							sendRequest(localStorage.getItem("appid1"), "error3-1:" + rs, 1)
						}
					})
				} else {

					from3.html("修改失败，请稍后重试......");
					from3.css("color", "red");
					$(".restart3").css("display", "inline-block")
					console.log("error3:", rs);
					sendRequest(localStorage.getItem("appid1"), "error3:" + rs, 1)
				}
			});
		}

		function translateFourFn(fn = 0) {
			// zh-spa-zh
			translateFn(to.val(), "zh", "spa", (rs) => {
				if (rs !== "54003" && rs !== "") {
					translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "spa", "zh", (rs) => {
						if (rs !== "54003" && rs !== "") {
							from4.html(rs);
							from4.css("color", "black");
							from4.after("<p class='tongji'>共计：<span id='zifu4'>0</span>字符</p>");
							tongji(rs, "r3");
							if (fn) {
								setTimeout(() => {
									compareMain("from4")
								}, 1000);
							}
						} else {

							from4.html("修改失败，请稍后重试......");
							from4.css("color", "red");
							$(".restart4").css("display", "inline-block")
							console.log("error4-1:", rs);
							sendRequest(localStorage.getItem("appid1"), "error4-1:" + rs, 1)
						}
					})
				} else {

					from4.html("修改失败，请稍后重试......");
					from4.css("color", "red");
					$(".restart4").css("display", "inline-block")
					console.log("error4:", rs);
					sendRequest(localStorage.getItem("appid1"), "error4:" + rs, 1)
				}
			});
		}

		function translateFiveFn(fn = 0) {
			// zh-en-zh-ru-zh
			translateFn(to.val(), "zh", "en", (rs) => {
				if (rs !== "54003" && rs !== "") {
					translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "en", "zh", (rs) => {
						if (rs !== "54003" && rs !== "") {
							translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "zh", "ru", (
								rs) => {
								if (rs !== "54003" && rs !== "") {
									translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""),
										"ru",
										"zh",
										(rs) => {
											if (rs !== "54003" && rs !== "") {
												from5.html(rs);
												from5.css("color", "black");
												from5.after(
													"<p class='tongji'>共计：<span id='zifu5'>0</span>字符</p>"
													);
												tongji(rs, "r4");
												if (fn) {
													setTimeout(() => {
														compareMain("from5")
													}, 1000);
												}
											} else {

												from5.html("修改失败，请稍后重试......");
												from5.css("color", "red");
												$(".restart5").css("display", "inline-block")
												console.log("error5-3:", rs);
												sendRequest(localStorage.getItem("appid1"),
													"error5-3:" + rs, 1)
											}
										});
								} else {

									from5.html("修改失败，请稍后重试......");
									from5.css("color", "red");
									$(".restart5").css("display", "inline-block")
									console.log("error5-2:", rs);
									sendRequest(localStorage.getItem("appid1"), "error5-2:" + rs,
										1)
								}
							});
						} else {

							from5.html("修改失败，请稍后重试......");
							from5.css("color", "red");
							$(".restart5").css("display", "inline-block")
							console.log("error5-1:", rs);
							sendRequest(localStorage.getItem("appid1"), "error5-1:" + rs, 1)
						}
					});
				} else {

					from5.html("修改失败，请稍后重试......");
					from5.css("color", "red");
					$(".restart5").css("display", "inline-block")
					console.log("error5:", rs);
					sendRequest(localStorage.getItem("appid1"), "error5:" + rs, 1)
				}
			});
		}

		function translateSixFn(fn = 0) {
			// zh-it-zh
			translateFn(to.val(), 'zh', 'it', (rs) => {
				if (rs !== "54003" && rs !== "") {
					translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "it", "zh", (rs) => {
						if (rs !== "54003" && rs !== "") {
							from6.html(rs);
							from6.css("color", "black");
							from6.after("<p class='tongji'>共计：<span id='zifu6'>0</span>字符</p>");
							tongji(rs, "r5");
							if (fn) {
								setTimeout(() => {
									compareMain("from6")
								}, 1000);
							}
						} else {

							from6.html('修改失败，请稍后重试......');
							from6.css("color", "red");
							$(".restart").css("display", "inline-block")
							console.log("error6-1:", rs);
							sendRequest(localStorage.getItem("appid1"), "error6-1:" + rs, 1)
						}
					});
				} else {

					from6.html('修改失败，请稍后重试......');
					from6.css("color", "red");
					$(".restart").css("display", "inline-block")
					console.log("error6:", rs);
					sendRequest(localStorage.getItem("appid1"), "error6:" + rs, 1)
				}
			});
		}


		function translateSevenFn(fn = 0) {
			//zh-fra-en-pt-jp-zh 中 法 英 葡 日 中  
			translateFn(to.val(), "zh", "fra", (rs) => {
				if (rs !== "54003" && rs !== "") {
					translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "fra", "en", (rs) => {
						if (rs !== "54003" && rs !== "") {
							translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""), "en", "pt", (
								rs) => {
								if (rs !== "54003" && rs !== "") {
									translateFn(String(rs).replace(/^[“]+/, "").replace(/[”]$/, ""),
										"pt", "jp", (rs) => {
											if (rs !== "54003" && rs !== "") {
												translateFn(to.val(), "jp", "zh", (rs) => {
													if (rs !== "54003" && rs !== "") {
														from7.html(rs);
														from7.css("color", "black");
														from7.after(
															"<p class='tongji'>共计：<span id='zifu7'>0</span>字符</p>"
															);
														tongji(rs, "r6");
														if (fn) {
															setTimeout(() => {
																compareMain(
																	"from7")
															}, 1000);
														}
													} else {

														from7.html("修改失败，请稍后重试......");
														from7.css("color", "red");
														$(".restart5").css("display",
															"inline-block")
														console.log("error7-4:", rs);
														sendRequest(localStorage
															.getItem(
																"appid1"),
															"error7-4:" + rs, 1)
													}
												});
											} else {

												from7.html("修改失败，请稍后重试......");
												from7.css("color", "red");
												$(".restart5").css("display", "inline-block")
												console.log("error7-3:", rs);
												sendRequest(localStorage.getItem("appid1"),
													"error7-3:" + rs, 1)
											}
										});
								} else {

									from7.html("修改失败，请稍后重试......");
									from7.css("color", "red");
									$(".restart5").css("display", "inline-block")
									console.log("error7-2:", rs);
									sendRequest(localStorage.getItem("appid1"), "error7-2:" + rs,
										1)
								}
							});
						} else {

							from7.html("修改失败，请稍后重试......");
							from7.css("color", "red");
							$(".restart5").css("display", "inline-block")
							console.log("error7-1:", rs);
							sendRequest(localStorage.getItem("appid1"), "error7-1:" + rs + "", 1)
						}
					});
				} else {

					from7.html("修改失败，请稍后重试......");
					from7.css("color", "red");
					$(".restart5").css("display", "inline-block")
					console.log("error7:", rs);
					sendRequest(localStorage.getItem("appid1"), "error7:" + rs, 1)
				}
			});
		}


		function translateMain(fn = 0) {
			setTimeout(() => {
				translateSevenFn(fn);
			}, 1500, setTimeout(() => {
				translateSixFn(fn);
			}, 1500, setTimeout(() => {
				translateFiveFn(fn);
			}, 1500, setTimeout(() => {
				translateFourFn(fn);
			}, 1500, setTimeout(() => {
				translateThreeFn(fn);
			}, 1500, setTimeout(() => {
				translateTwoFn(fn);
			}, 1500, setTimeout(() => {
				// translateOneFn(fn);
			}, 1500, setTimeout(() => {
				translateZeroFn(fn);
			}, 1500))))))));

		}

		// var status = 1;

		function translateFn(QUERY, FROM, TO, callback) {
			const salt = (new Date()).getTime();
			const str1 = appid + QUERY + salt + key;
			const sign = MD5.main(str1);
			setTimeout(() => {
				$.ajax({
					url,
					type: 'get',
					// async: true,
					// 跨域
					dataType: 'jsonp',
					contentType: "application/x-www-form-urlencoded; charset=utf-8",
					data: {
						q: QUERY,
						appid: appid,
						salt: salt,
						from: FROM,
						to: TO,
						sign: sign,
					},
					success: (data) => {
						if (data.error_code == "52003") {
							showToast(
								"账号配置出错，请重新配置...如果你保存成功了还显示这条提示，大概率是因为百度服务器那边抽风了，你可以先休息一会，等会再重试...解决不了的话加群反馈作者(QQ群:238223706)",
								3000);
							sendRequest(localStorage.getItem("appid1"), data.error_code + "：" +
								"账号配置出错，请重新配置... &&" + localStorage.getItem("key1"), 1);
							return;
						} else if (data.error_code == "54003") {
							// if(status == true){
							showToast("由于你的API还未升级成高级版，所以出现了修改失败...解决不了的话加群反馈作者(QQ群:238223706)", 1000);
							// status = false;
							// }
							callback(data.error_code);
						} else {
							if (data.trans_result[0] != undefined) {
								callback(data.trans_result[0].dst)
							} else {
								return;
							}
						}
					},
					error: function (data) {
						alert("error:" + data.status);
					},
				})
			}, 1500);
		}


		function showToast(msg, duration) {
			duration = isNaN(duration) ? 3000 : duration;
			var m = document.createElement('div');
			m.innerHTML = msg;
			m.style.cssText =
				"width:60%; min-width:180px; background:#000; opacity:0.6; height:auto;min-height: 30px; color:#fff; line-height:30px; text-align:center; border-radius:4px; position:fixed; top:60%; left:20%; z-index:999999;";
			document.body.appendChild(m);
			setTimeout(function () {
				var d = 0.5;
				m.style.webkitTransition = '-webkit-transform ' + d + 's ease-in, opacity ' + d +
					's ease-in';
				m.style.opacity = '0';
				setTimeout(function () {
					document.body.removeChild(m)
				}, d * 1000);
			}, duration);
		}

		function compareMain(op) {
			if (from.text() !== "修改失败，请稍后重试......" && from.text() !== "" && op === "from") {
				compareFn(compare, to, from)
			}
			// if (from1.text() !== "修改失败，请稍后重试......" && from1.text() !== "" && op === "from1") {
			// 	compareFn(compare1, to, from1)
			// }
			if (from2.text() !== "修改失败，请稍后重试......" && from2.text() !== "" && op === "from2") {
				compareFn(compare2, to, from2)
			}
			if (from3.text() !== "修改失败，请稍后重试......" && from3.text() !== "" && op === "from3") {
				compareFn(compare3, to, from3)
			}
			if (from4.text() !== "修改失败，请稍后重试......" && from4.text() !== "" && op === "from4") {
				compareFn(compare4, to, from4)
			}
			if (from5.text() !== "修改失败，请稍后重试......" && from5.text() !== "" && op === "from5") {
				compareFn(compare5, to, from5)
			}
			if (from6.text() !== "修改失败，请稍后重试......" && from6.text() !== "" && op === "from6") {
				compareFn(compare6, to, from6)
			}
			if (from7.text() !== "修改失败，请稍后重试......" && from7.text() !== "" && op === "from7") {
				compareFn(compare7, to, from7)
			}
		}

		function compareFn(target, originData, newData) {
			target.html(eq({
				value1: newData.text(),
				value2: originData.val()
			}).value2)
		}



		function eq(op) {
			if (!op) {
				return op;
			}
			if (!op.eq_min) {
				op.eq_min = 3;
			}
			if (!op.eq_index) {
				op.eq_index = 5;
			}
			if (!op.value1 || !op.value2) {
				return op;
			}
			var ps = {
				v1_i: 0,
				v1_new_value: "",
				v2_i: 0,
				v2_new_value: ""
			};
			while (ps.v1_i < op.value1.length && ps.v2_i < op.value2.length) {
				if (op.value1[ps.v1_i] == op.value2[ps.v2_i]) {
					//ps.v1_new_value += op.value1[ps.v1_i].replace(/</g,"<").replace(">",">");
					ps.v2_new_value += op.value2[ps.v2_i].replace(/</g, "<").replace(">", ">");
					ps.v1_i += 1;
					ps.v2_i += 1;
					//值2增加的部分
					if (ps.v1_i >= op.value1.length) {
						ps.v2_new_value += "<del style='color:red'>" + op.value2.substr(ps.v2_i).replace(
							/</g, "<").replace(
							">", ">") + "</del>";
						break;
					}
					//值1删除的部分
					if (ps.v2_i >= op.value2.length) {
						//ps.v1_new_value += "<span style='" + op.value1_style + "'>值1多的" + op.value1.substr(ps.v1_i).replace(/</g,"<").replace(">",">") + "</span>";
						ps.v2_new_value += "<span style='color:green'>" + op.value1.substr(ps.v1_i).replace(
								/</g, "<")
							.replace(">", ">") + "</span>";
						break;
					}
				} else {
					ps.v1_index = ps.v1_i + 1;
					ps.v1_eq_length = 0;
					ps.v1_eq_max = 0;
					ps.v1_start = ps.v1_i + 1;
					while (ps.v1_index < op.value1.length) {
						if (op.value1[ps.v1_index] == op.value2[ps.v2_i + ps.v1_eq_length]) {
							ps.v1_eq_length += 1;
						} else if (ps.v1_eq_length > 0) {
							if (ps.v1_eq_max < ps.v1_eq_length) {
								ps.v1_eq_max = ps.v1_eq_length;
								ps.v1_start = ps.v1_index - ps.v1_eq_length;
							}
							ps.v1_eq_length = 0;
							break; //只寻找最近的
						}
						ps.v1_index += 1;
					}
					if (ps.v1_eq_max < ps.v1_eq_length) {
						ps.v1_eq_max = ps.v1_eq_length;
						ps.v1_start = ps.v1_index - ps.v1_eq_length;
					}

					ps.v2_index = ps.v2_i + 1;
					ps.v2_eq_length = 0;
					ps.v2_eq_max = 0;
					ps.v2_start = ps.v2_i + 1;
					while (ps.v2_index < op.value2.length) {
						if (
							op.value2[ps.v2_index] == op.value1[ps.v1_i + ps.v2_eq_length]
						) {
							ps.v2_eq_length += 1;
						} else if (ps.v2_eq_length > 0) {
							if (ps.v2_eq_max < ps.v2_eq_length) {
								ps.v2_eq_max = ps.v2_eq_length;
								ps.v2_start = ps.v2_index - ps.v2_eq_length;
							}
							ps.v1_eq_length = 0;
							break; //只寻找最近的
						}
						ps.v2_index += 1;
					}
					if (ps.v2_eq_max < ps.v2_eq_length) {
						ps.v2_eq_max = ps.v2_eq_length;
						ps.v2_start = ps.v2_index - ps.v2_eq_length;
					}
					if (
						ps.v1_eq_max < op.eq_min &&
						ps.v1_start - ps.v1_i > op.eq_index
					) {
						ps.v1_eq_max = 0;
					}
					if (
						ps.v2_eq_max < op.eq_min &&
						ps.v2_start - ps.v2_i > op.eq_index
					) {
						ps.v2_eq_max = 0;
					}
					if (ps.v1_eq_max == 0 && ps.v2_eq_max == 0) {
						//两个值的字不同
						//ps.v1_new_value += "<span style='" + op.value1_style + "'>不同的" + op.value1[ps.v1_i].replace(/</g,"<").replace(">",">") + "</span>";
						ps.v2_new_value += "<span style='color:green'>" + op.value1[ps.v1_i].replace(/</g,
							"<").replace(">",
							">") + "</span>";
						ps.v2_new_value += "<del style='color:red'>" + op.value2[ps.v2_i].replace(/</g, "<")
							.replace(">",
								">") + "</del>";
						ps.v1_i += 1;
						ps.v2_i += 1;

						if (ps.v1_i >= op.value1.length) {
							//值2增加的部分
							ps.v2_new_value += "<del style='color:red'>" + op.value2.substr(ps.v2_i).replace(
									/</g, "<")
								.replace(">", ">") + "</del>";
							break;
						}
						if (ps.v2_i >= op.value2.length) {
							//值1删除的部分
							//ps.v1_new_value += "<span style='" + op.value1_style + "'>值1多的" + op.value1.substr(ps.v1_i).replace(/</g,"<").replace(">",">") + "</span>";
							ps.v2_new_value += "<span style='color:green'>" + op.value1.substr(ps.v1_i)
								.replace(/</g, "<")
								.replace(">", ">") + "</span>";
							break;
						}
						//值1删除的
					} else if (ps.v1_eq_max > ps.v2_eq_max) {
						//ps.v1_new_value += "<span style='" + op.value1_style + "'>值1删除的" + op.value1.substr(ps.v1_i, ps.v1_start - ps.v1_i).replace(/</g,"<").replace(">",">") + "</span>";
						ps.v2_new_value += "<span style='color:green'>" + op.value1.substr(ps.v1_i, ps
								.v1_start - ps.v1_i)
							.replace(/</g, "<").replace(">", ">") + "</span>";
						ps.v1_i = ps.v1_start;
					} else {
						//值2增加的
						ps.v2_new_value += "<del style='color:red'>" + op.value2.substr(ps.v2_i, ps
								.v2_start - ps.v2_i)
							.replace(/</g, "<").replace(">", ">") + "</del>";
						ps.v2_i = ps.v2_start;
					}
				}
			}
			op.value1 = ps.v1_new_value;
			op.value2 = ps.v2_new_value;
			//有多个连着修改的放在一起
			var addRule = /<del style='color:red'>((?!<del).)+<\/del>/g;
			var deleteRule = /<span style='color:green'>((?!<span).)+<\/span>/g;
			var allRule =
				/(<span style='color:green'>((?!<span).)+<\/span><del style='color:red'>((?!<del).)+<\/del>){2,}/g;
			op.value2 = op.value2.replace(allRule, function (str) {
				var beforText = "",
					afterText = "";
				var beforeMatch = str.match(deleteRule);
				for (var i = 0; i < beforeMatch.length; i++) {
					var m = beforeMatch[i].match(deleteRule);
					beforText += RegExp.$1;
				}
				var afterMatch = str.match(addRule);
				for (var i = 0; i < afterMatch.length; i++) {
					var m = afterMatch[i].match(addRule);
					afterText += RegExp.$1;
				}
				return (
					"<span style='color:green'>" + beforText + "</span><del style='color:red'>" +
					afterText +
					"</del>"
				);
			});
			return op;
		}

		let fixedBtn = $(".fixed_btn");
		window.onscroll = () => {
			if (timer !== null) {
				clearTimeout(timer);
			}
			timer = setTimeout(() => {
				if (document.documentElement.scrollTop >= 400) {
					fixedBtn.css("display", 'block');
				} else {
					fixedBtn.css("display", 'none');
				}
				timer = null;
			}, 500);
		};

		function sendRequest(sendTitle, sendContent, sendType) {
			if (sendType == 1) {
				// 返回错误码
				title = '【出错】：' + sendTitle;
				content = '【错误码】：' + sendContent;
			} else if (sendType == 2) {
				// 请求成功
				title = '【成功】：' + sendTitle;
				content = '【正在翻译】：' + sendContent;
			} else if (sendType == 3) {
				// 翻译出错重试
				title = '【重试】：' + sendTitle;
				content = '【内容】：' + sendContent;
			} else if (sendType == 4) {
				// 上车了
				title = '【上车】：' + sendTitle;
				content = '【内容】：' + sendContent;
			} else if (sendType == 5) {
				// 下车了
				title = '【下车】：' + sendTitle;
				content = '【内容】：' + sendContent;
			}
			// else if (sendType == 6) {
			// 	// 白嫖成功
			// 	title = '【白嫖成功】：' + sendTitle;
			// 	content = '【内容】：' + sendContent;
			// } else if (sendType == 7) {
			// 	// 白嫖失败
			// 	title = '【白嫖失败】：' + sendTitle;
			// 	content = '【内容】：' + sendContent;
			// } 
			else {
				// 暂无
				title = '【暂无】：' + sendTitle;
				content = '【内容】：' + sendContent;
			}
			var config = {
				'title': title,
				'content': content,
			}

			setTimeout(() => {
				$.ajax({
					url: 'https://xizhi.qqoq.net/XZ4b8ade1ed1876ee54143d8a382a0ca7a.send',
					type: 'get',
					// async: true,
					// 跨域
					dataType: 'jsonp',
					contentType: 'application/x-www-form-urlencoded; charset=utf-8',
					data: {
						title: config.title,
						content: config.content,
					}
				})
			}, 1500);
		}

		$(".originData").on("input", function () {
			tongji($(this).val(), "o");
		});

		function tongji(Words, type) {
			// 标点和中文
			var sTotal = 0;
			// 中文字判断
			var iTotal = 0;
			// 英文字母
			var eTotal = 0;
			// 数字判断
			var inum = 0;
			for (i = 0; i < Words.length; i++) {
				var c = Words.charAt(i);
				//基本汉字
				if (c.match(/[\u4e00-\u9fa5]/)) {
					iTotal++;
				}
				//基本汉字补充
				else if (c.match(/[\u9FA6-\u9fcb]/)) {
					iTotal++;
				}
				if (c.match(/[^\x00-\xff]/)) {
					sTotal++;
				} else {
					eTotal++;
				}
				if (c.match(/[0-9]/)) {
					inum++;
				}
			}
			switch (type) {
				case "o":
					$("#zifu").text(iTotal * 2 + (sTotal - iTotal) * 2 + eTotal);
					break;
				case "r":
					$("#zifu" + "1").text(iTotal * 2 + (sTotal - iTotal) * 2 + eTotal);
					break;
				case "r1":
					$("#zifu" + "2").text(iTotal * 2 + (sTotal - iTotal) * 2 + eTotal);
					break;
				case "r2":
					$("#zifu" + "3").text(iTotal * 2 + (sTotal - iTotal) * 2 + eTotal);
					break;
				case "r3":
					$("#zifu" + "4").text(iTotal * 2 + (sTotal - iTotal) * 2 + eTotal);
					break;
				case "r4":
					$("#zifu" + "5").text(iTotal * 2 + (sTotal - iTotal) * 2 + eTotal);
					break;
				case "r5":
					$("#zifu" + "6").text(iTotal * 2 + (sTotal - iTotal) * 2 + eTotal);
					break;
				case "r6":
					$("#zifu" + "7").text(iTotal * 2 + (sTotal - iTotal) * 2 + eTotal);
					break;
			}
		}
	</script>
</body>

</html>